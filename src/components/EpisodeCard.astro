---
import { formatShortDateInVienna } from '../lib/date'
import type { Episode } from '../lib/types'

interface Props {
  episode: Episode
}

const { episode } = Astro.props
const formattedDate = formatShortDateInVienna(episode.publishedAt)
const episodeNumber = episode.episodeNumber.toString().padStart(3, '0')
---

<article class="py-6 border-b border-neutral-200 dark:border-neutral-700 last:border-b-0">
  <a href={`/${episode.slug}`} class="block group">
    <div class="flex items-start gap-4">
      <span class="text-sm font-mono text-neutral-400 dark:text-neutral-500 mt-9">{episodeNumber}</span>
      <div class="flex-1 min-w-0 gap-2 flex flex-col">
        <div class="flex items-center gap-1.5 text-sm text-neutral-500 dark:text-neutral-400 mt-1">
          <time datetime={episode.publishedAt.toISOString()}>{formattedDate}</time>
          {episode.duration && (
            <>
              <span class="text-neutral-400 dark:text-neutral-500">Â·</span>
              <span>{episode.duration}</span>
            </>
          )}
        </div>
        <h2
          class="text-lg sm:text-xl font-semibold text-neutral-900 dark:text-neutral-100 group-hover:text-neutral-600 dark:group-hover:text-white transition-colors"
        >
          {episode.title}
        </h2>
        {
          episode.description && (
            <p class="text-neutral-600 dark:text-neutral-400 line-clamp-2">{episode.description}</p>
          )
        }
      </div>
    </div>
  </a>
</article>
